# freee 退勤通知 Chrome 拡張機能

**freee での 8 時間勤務が終わる前と完了時に、デスクトップ通知を自動送信します**

## ✨ できること

- 🕘 **退勤前に 2 回のタイミングで自動通知（時間は変更可能）**
- 📊 **複数回の休憩時間を自動計算**（昼休み＋離席+子どものお迎えなどに対応）
- 🔄 **毎日自動リセット**（前日の設定は自動クリア）
- 💻 **デスクトップ通知**（freee を閉じていても chrome で別のタブが開いていれば通知）
- ⏰ **超過勤務も検出**（8 時間を超過した場合も設定時間ごとに通知）
- 🔄 **データ復元機能**（ブラウザ再読み込み後も設定を自動復元）
- 🏁 **退勤済み検出**

## 🎯 こんな人におすすめ

- freee 勤怠管理を使っている
- 8 時間勤務の退勤タイミングを忘れがち
- 複数回の休憩を取る（離席・習い事の送迎など）
- Chrome ブラウザを使用している(Dia なども対応)

## 🚀 セットアップ

### 1. 通知権限の確認

- macOS の場合：システム設定 > 通知 > Google Chrome が許可されていることを確認

### 2. ファイルをダウンロード

[**こちらから Zip ファイルをダウンロード**](https://github.com/yama-shoki/freee-work-time-notifier/archive/refs/heads/main.zip)

### 3. ファイルを解凍

ダウンロードした`freee-work-time-notifier-main.zip`を解凍

### 4. Chrome 拡張機能に追加

1. Chrome で [chrome://extensions/](chrome://extensions/) を開く
2. 右上の**「デベロッパーモード」**を ON にする
3. **「パッケージ化されていない拡張機能を読み込む」**をクリック
4. 解凍したフォルダを選択

### 動作テスト

1. [freee 勤怠管理](https://p.secure.freee.co.jp/)にログイン
2. 右上の拡張機能アイコンを押して拡張機能を開く。
3. freee の**「修正」**ボタンをクリック
4. 「退勤通知設定完了」というデスクトップ通知が届けば成功です。
5. 機能しない場合は再読み込みしてください。

## 💻 使い方

🔍 通知のセットアップは、freee の勤怠ページで **「修正」ボタンを押したタイミングで実行されます。**休憩を挟んだ場合は、**休憩終了後に必ず「修正」ボタンを押してください。**完了予定時刻が再計算されて通知がセットされます。

通知のタイミングは、Chrome 右上の拡張機能アイコンから自由に設定できます。

### ✅ ステータス表示

拡張機能のポップアップでは以下の情報を確認できます：

- 勤務中：現在の状況と完了予定時刻
- 退勤済み：実際の勤務時間
- 超過勤務中：超過時間の表示

※ページ再読み込み後や再度 freee のページを開く場合は、計算がズレる場合があります。正確な時間と現在のステータスは「修正」ボタンで確認してください。

### ⚙️ 通知のタイミングと設定

**1 回目の通知タイミング:**

- 1 時間前
- 30 分前
- 15 分前
- 10 分前（デフォルト）
- 5 分前

**2 回目の通知タイミング:**

- 5 分前
- 3 分前
- 1 分前（デフォルト）

**完了時の通知:**

- 上記に加えて、8 時間経過した時点で「8 時間勤務完了！」通知が届きます。

**超過勤務の通知:**

- 「超過勤務の通知を有効にする」にチェックを入れると、8 時間経過後、設定した間隔で超過勤務をお知らせする通知が届きます。
- 通知間隔は「15 分ごと」「30 分ごと（デフォルト）」「1 時間ごと」から選択できます。

## 🛠️ よくある質問

**Q. 通知が来ない**

- ブラウザと macOS の通知権限を確認してください。
- freee のページで一度「修正」ボタンをクリックしたか確認してください。

**Q. 休憩を複数回取る場合は？**

- 自動で全ての休憩時間を合計して計算します。休憩を終了するたびに、「修正」ボタンを押してください。

**Q. 残業している場合は？**

- 8 時間完了時点で一度通知します。ポップアップから超過勤務通知を有効にしている場合は、さらに設定した間隔で定期的に通知が届きます。

**Q. 翌日はどうする？**

- 日付が変わると、前日の設定は自動でリセットされます。

**Q. ブラウザを再読み込みしたら設定が消える？**

- データ復元機能により、同日内であれば再読み込み後も設定が復元されます。ただし正確な時間確認には「修正」ボタンをクリックしてください。

**Q. 退勤記録済みなのに勤務中と表示される？**

- 自動的に退勤済みを検出して表示を更新します。おかしい場合は「修正」ボタンで最新状態に更新してください。

---

## ⚠️ 注意事項

- この拡張機能は freee 公式ではありません
- 正確な通知時間は「修正」ボタンを押すと更新されます。
- 休憩を挟んだ場合や勤務時間を超過した場合は、「修正」ボタンを押すと更新されます。
