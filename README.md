# freee退勤通知 Chrome拡張機能

freee勤怠管理で8時間労働完了の**10分前**・**1分前**にmacOSに通知を出すChrome拡張機能です。

## 🎯 主な機能

- **8時間労働完了予定時刻の自動計算**
- **10分前・1分前の通知**
- **複数回の休憩に対応**
- **超過勤務の検出**
- **macOS通知センター連携**
- **毎日自動リセット機能**（日付が変わったら前日の通知をクリア）

## 📋 対応する休憩パターン

### ✅ 単純な休憩
```
出勤: 09:13
休憩: 12:00-13:00 (1時間)
→ 8時間完了予定: 18:13
```

### ✅ 複数回の休憩
```
出勤: 07:30
休憩1: 13:00-13:42 (42分)
休憩2: 14:50-15:18 (28分)
→ 休憩合計70分も自動計算
```

### ✅ 長時間休憩
```
出勤: 07:30
休憩: 14:30-16:30 (2時間)
→ 長時間休憩も対応
```

## 🚀 インストール方法

### 1. ファイルのダウンロード
```bash
git clone <このリポジトリ>
cd freee-notification-extension
```

### 2. アイコンファイルの作成
1. `create-icons.html` をブラウザで開く
2. 各サイズのアイコンをダウンロード
3. `icons/` フォルダに以下のファイルを配置:
   - `icon16.png`
   - `icon48.png`
   - `icon128.png`

### 3. Chrome拡張機能として読み込み
1. Chromeで `chrome://extensions/` にアクセス
2. **デベロッパーモード** をONにする
3. **パッケージ化されていない拡張機能を読み込む** をクリック
4. このフォルダを選択

## 📖 使い方

### 1. freeeにアクセス
freee勤怠管理ページ（`https://p.secure.freee.co.jp/`）を開きます。

### 2. 修正ボタンをクリック
ホームページの勤怠打刻部分にある **「修正」** ボタンをクリックします。

### 3. 自動計算開始
修正ダイアログが表示されると、自動で以下を計算します：
- 現在の実労働時間
- 8時間完了予定時刻
- 通知タイミング

### 4. 通知を受け取る
- **10分前通知**: 「退勤10分前」
- **1分前通知**: 「退勤1分前」
- **完了通知**: 「8時間労働完了！」

## ⚙️ 設定

拡張機能のアイコンをクリックして設定画面を開けます：

- **通知機能のON/OFF**
- **1回目の通知タイミング** (5分前/10分前/15分前)
- **2回目の通知タイミング** (1分前/3分前/5分前)
- **通知音のON/OFF**

## 🔧 技術仕様

### ファイル構成
```
freee-notification-extension/
├── manifest.json          # 拡張機能の設定
├── src/
│   ├── content.js         # freeeページの監視
│   ├── background.js      # 通知管理
│   ├── popup.html         # 設定画面
│   └── popup.js           # 設定画面のスクリプト
├── icons/                 # アイコンファイル
└── README.md
```

### 動作原理
1. **content.js**: freeeの修正ダイアログを監視してデータ取得
2. **background.js**: Chrome Alarms APIで通知をスケジュール
3. **Chrome Notifications API**: macOS通知センターに通知表示

## 🐛 トラブルシューティング

### 通知が表示されない
1. ブラウザの通知権限を確認
2. macOSの通知設定でChromeを許可
3. 拡張機能を再読み込み

### 計算が正しくない
1. freeeの修正ダイアログを開き直す
2. 勤怠データが正しく入力されているか確認
3. 複数回休憩の場合、全ての休憩終了時刻が入力されているか確認

### freeeのページ更新後に動作しない
1. ページを再読み込み
2. 修正ボタンを再度クリック

## 📝 更新履歴

### v1.0.0 (2025-09-24)
- 初回リリース
- 基本的な8時間完了予定時刻計算
- 10分前・1分前通知
- 複数回休憩対応
- 設定画面追加

## 🤝 貢献

バグ報告や機能要望は Issues でお知らせください。

## 📜 ライセンス

MIT License

---

**⚠️ 注意事項**
- この拡張機能はfreee公式ではありません
- freeeのページ構造変更により動作しなくなる可能性があります
- 勤怠管理は必ず公式の機能で確認してください